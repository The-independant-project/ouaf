{% extends "base.html" %}

{% block content %}
<h1>Ajout d'un nouvel animal</h1>
<form method="post" action="{% url 'backoffice:animal_create' %}" enctype="multipart/form-data">
    {% csrf_token %}

    {% if form.errors %}
        {{form.errors}}
    {% endif %}

    {{ form }}

    {% if formset.errors %}
        {{formset.errors}}
    {% endif %}

    {{ media_formset.management_form }}
    <div id="media-forms" class="formGrid">
        {% for mf in media_formset %}
        <div class="form__row span-full"
             style="border:1px dashed var(--clr-primary-dark); padding:1rem; border-radius:var(--radius);">
            <p class="form__label"><strong>Média #{{ forloop.counter }}</strong></p>

            <div class="formGrid">
                <div class="form__row">
                    <label class="form__label" for="{{ mf.file.id_for_label }}">Fichier</label>
                    {{ mf.file }}
                </div>

                <div class="form__row">
                    <label class="form__label" for="{{ mf.url.id_for_label }}">URL</label>
                    {{ mf.url }}
                    <p class="form__help">Ex. image/vidéo distante ou URL YouTube.</p>
                </div>

                <div class="form__row">
                    <label class="form__label" for="{{ mf.caption.id_for_label }}">Légende</label>
                    {{ mf.caption }}
                </div>

                <div class="form__row">
                    <label class="form__label" for="{{ mf.position.id_for_label }}">Position</label>
                    {{ mf.position }}
                </div>

                {% if mf.DELETE %}
                <div class="form__row">
                    <label class="form__label" for="{{ mf.DELETE.id_for_label }}">Supprimer</label>
                    {{ mf.DELETE }}
                </div>
                {% endif %}
            </div>

            {% if mf.non_field_errors %}
                <div class="form__errors">{{ mf.non_field_errors }}</div>
            {% endif %}
        </div>
        {% endfor %}
    </div>

    <input type="submit" value="Confirmer">
    <input type="hidden" name="next" value="{{ next }}">
</form>


{% endblock %}